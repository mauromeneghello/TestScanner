!function(a){function b(a){function b(){for(var a in m)delete m[a]}function c(a){return"undefined"!=typeof l[a]?l[a]:j[a].members}function d(b,d){if(b=void 0===b||null===b?"_all":b,d=void 0===d?!0:d,"undefined"==typeof m[b]){h.clear(),h.drill(a.cube),h.push(a.measure);for(var e in j)e==b?h.slice(j[e].hierarchy,j[b].members):h.slice(j[e].hierarchy,c(e));"_all"!=b&&d&&h.dice([j[b].hierarchy]),m[b]=h.execute().map(function(c){return{key:c[b],value:c[a.measure]}}).sort(function(a,b){return a.key>b.key?1:-1})}return m[b]}function e(){out=1;for(var a in j)out*=j[a].members.length;return out}function f(){var a={reduce:function(){return a},reduceCount:function(){return a},reduceSum:function(){return a},dispose:function(){},value:function(){return d(null,!1)[0].value}};return a}function g(a){function c(a){var b={};return Object.keys(j).forEach(function(a){b[a]=a}),a(b)}function e(a){return null===a?k():Array.isArray(a)?g(a):"function"==typeof a?h(a):f(a)}function f(a){return b(),h(function(b){return b==a})}function g(a){return b(),h(function(b){return b>=a[0]&&b<=a[1]})}function h(a){for(b(),l[s]=[],i=0;i<v.length;i++)a(v[i])&&l[s].push(v[i]);return w}function k(){return b(),l[s]=v,w}function n(){throw"Not implemented yet"}function o(){throw"Not implemented yet"}function p(){var a={reduce:function(){return a},reduceCount:function(){return a},reduceSum:function(){return a},dispose:function(){},value:function(){return d(s,!1)[0].value}};return a}function q(){delete l[s],delete m[s]}function r(){function a(){null===m&&(m=function(a){return a});for(var a=[],b=d(s),c=0;c<b.length;c++)a[c]=b[c];return a.sort(function(a,b){return m(a.value)>m(b.value)?-1:1}),a}function b(){return d(s)}function c(b){return a().slice(0,b)}function e(){return l}function f(){return l}function g(){return l}function h(a){return m=a,l}function i(){return m=null,l}function j(){return v.length}function k(){}var l={top:c,all:b,reduce:e,reduceCount:f,reduceSum:g,order:h,orderNatural:i,size:j,dispose:k};l.getDataAndSort=a,l.sortFunc=m;var m=null;return l}var s=c(a),t=j[s].hierarchy,u=j[s].level,v=j[s].members;if("string"!=typeof s||"string"!=typeof t||"number"!=typeof u||!Array.isArray(v)||v.length<=0)throw"Dimension do not exist or malformed in declared metadata";var w={filter:e,filterExact:f,filterRange:g,filterFunction:h,filterAll:k,top:n,bottom:o,group:r,groupAll:p,dispose:q};return w.dimensionName=s,w.getDimensionName=c,w}var h=a.api,j=a.dimensions;if("object"!=typeof h||"string"!=typeof a.schema||"string"!=typeof a.cube||"string"!=typeof a.measure||"object"!=typeof j||Object.keys(j).length<1)throw"Metadata are malformed";var k={dimension:g,groupAll:f,size:e};k.filters=l,k.datasets=m,k.emptyDatasets=b,k.getSlice=c,k.getData=d;var l={},m={};return k}a.crossfilterServer=b}("undefined"!=typeof exports&&exports||this);
//# sourceMappingURL=crossfilter-server.test.min.js.map