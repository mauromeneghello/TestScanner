var __bind=function(e,t){return function(){return e.apply(t,arguments)}},__slice=[].slice;(function(e,t){var n,r,i,s;r=function(e){return parseFloat(e.style.width.replace("%",""))};s=function(e,t,n){t=t.toFixed(2);e.style.width=""+t+"%";if(n!=undefined){e.style.left=""+n+"%"}};i=function(e){if(e.type.indexOf("touch")===0){return(e.originalEvent.touches[0]||e.originalEvent.changedTouches[0]).pageX}return e.pageX};n=function(){function n(n,r){this.pointerdown=__bind(this.pointerdown,this);this.constrainWidth=__bind(this.constrainWidth,this);this.options=e.extend({},this.defaults,r);this.$table=n;this.setHeaders();this.syncHandleWidths();e(t).on("resize.rc",function(e){return function(){return e.syncHandleWidths()}}(this));if(this.options.start){this.$table.bind("column:resize:start.rc",this.options.start)}if(this.options.resize){this.$table.bind("column:resize.rc",this.options.resize)}if(this.options.stop){this.$table.bind("column:resize:stop.rc",this.options.stop)}}n.prototype.defaults={selector:".chart-columns",store:null,syncHandlers:true,resizeFromBody:false,maxWidth:null,minWidth:null};n.prototype.triggerEvent=function(t,n,r){var i;i=e.Event(t);i.originalEvent=e.extend({},r);return this.$table.trigger(i,[this].concat(n||[]))};n.prototype.setHeaders=function(){this.$tableHeaders=this.$table.find(this.options.selector);this.assignPercentageWidths();return this.createHandles()};n.prototype.destroy=function(){this.$handleContainer.remove();this.$table.removeData("resizableColumns");return this.$table.add(t).off(".rc")};n.prototype.assignPercentageWidths=function(){return this.$tableHeaders.each(function(t){return function(n,r){var i;i=e(r);return s(i[0],i.outerWidth()/t.$table.width()*100)}}(this))};n.prototype.createHandles=function(){var t;if((t=this.$handleContainer)!=null){t.remove()}this.$table.before(this.$handleContainer=e("<div class='rc-handle-container' />"));this.$tableHeaders.each(function(t){return function(n,r){var i;if(t.$tableHeaders.eq(n+1).length===0||t.$tableHeaders.eq(n).attr("data-noresize")!=null||t.$tableHeaders.eq(n+1).attr("data-noresize")!=null){return}i=e("<div class='rc-handle' />");i.data(".chart-columns",e(r));return i.appendTo(t.$handleContainer)}}(this));return this.$handleContainer.on("mousedown touchstart",".rc-handle",this.pointerdown)};n.prototype.syncHandleWidths=function(){return this.$handleContainer.width(this.$table.width()).find(".rc-handle").each(function(t){return function(n,r){var i;i=e(r);return i.css({left:i.data(t.options.selector).outerWidth()+(i.data(t.options.selector).offset().left-t.$handleContainer.offset().left),height:t.options.resizeFromBody?t.$table.height():t.$table.find(t.options.selector+":first").height()})}}(this))};n.prototype.saveColumnWidths=function(){var t={};this.$tableHeaders.each(function(n,i){var s=e(i);t[s.attr("id")]=r(s[0])});return t};n.prototype.restoreColumnWidths=function(t){var n=0;var r=this.$tableHeaders.length-1;this.$tableHeaders.each(function(i,o){var u=e(o);if(i==0||i==r)s(u[0],t[u.attr("id")]);else s(u[0],t[u.attr("id")],n);n=t[u.attr("id")]});this.syncHandleWidths()};n.prototype.totalColumnWidths=function(){var t;t=0;this.$tableHeaders.each(function(n){return function(n,r){return t+=parseFloat(e(r)[0].style.width.replace("%",""))}}(this));return t};n.prototype.constrainWidth=function(e){if(this.options.minWidth!=null){e=Math.max(this.options.minWidth,e)}if(this.options.maxWidth!=null){e=Math.min(this.options.maxWidth,e)}return e};n.prototype.pointerdown=function(t){var n,o,u,a,f,l,c,h;t.preventDefault();u=e(t.currentTarget.ownerDocument);l=i(t);n=e(t.currentTarget);o=n.data(this.options.selector);c=this.$tableHeaders.index(o);a=this.$tableHeaders.eq(c+1);h={left:r(o[0]),right:r(a[0])};f={left:h.left,right:h.right};this.$handleContainer.add(this.$table).addClass("rc-table-resizing");o.add(a).add(n).addClass("rc-column-resizing");this.triggerEvent("column:resize:start",[o,a,f.left,f.right],t);u.on("mousemove.rc touchmove.rc",function(e){return function(t){var n;n=(i(t)-l)/e.$table.width()*100;f.left=e.constrainWidth(h.left+n);f.right=e.constrainWidth(h.right-n);if(f.left<3){f.right=f.right-3+f.left;f.left=3}else if(f.right<3){f.left=f.left-3+f.right;f.right=3}s(o[0],f.left);if(c==0)s(a[0],f.right,f.left);else s(a[0],f.right);if(e.options.syncHandlers!=null){e.syncHandleWidths()}return e.triggerEvent("column:resize",[o,a,f.left,f.right],t)}}(this));return u.one("mouseup touchend",function(e){return function(){u.off("mousemove.rc touchmove.rc");e.$handleContainer.add(e.$table).removeClass("rc-table-resizing");o.add(a).add(n).removeClass("rc-column-resizing");e.syncHandleWidths();e.saveColumnWidths();return e.triggerEvent("column:resize:stop",[o,a,f.left,f.right],t)}}(this))};return n}();return e.fn.extend({resizableColumns:function(){var t,r;r=arguments[0],t=2<=arguments.length?__slice.call(arguments,1):[];return this.each(function(){var i,s;i=e(this);s=i.data("resizableColumns");if(!s){i.data("resizableColumns",s=new n(i,r))}if(typeof r==="string"){return s[r].apply(s,t)}})}})})(window.jQuery,window)
